<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>变量的解构赋值</title>
	<style>

	</style>
</head>

<body>
	<div>

	</div>
	<script>
		// let [a, b, c] = [1, 2, 3];

		// let [a,[[b],c]] = [1,[[2],3]];

		// let [, , c] = [1, 2, 3];

		// let [a, , c] = [1, 2, 3];

		// let [x, ...b] = [1, 2, 3, 4, 5];

		// let [x, y, ...z] = [1];

		// 解构不成功，值为undefined

		// let [a, [b], c] = [1, [2, 3], 4];  // b:2,c:4

		// let a = 1;		// Uncaught TypeError: undefined is not a function

		// 只要某种数据结果具有Iterator借口，都可以采用数组形式的解构赋值

		/*
		function* fibs() {
			let a = 0;
			let b = 1;
			while (true) {
				yield a;
				[a, b] = [b, a + b];
			}
		}
		let [a, b, c, d, e, f] = fibs();
		console.log([a, b, c, d, e, f]);*/

		// 严格等于undefined时默认值生效
		// let [a = 1] = [];

		// 默认值为表达式，则表达式为惰性求值
		/*
		function f() {
			let a = 1;
			a += 1;
			return a;
		}
		let [x = f()] = [1];*/

		// 默认值可以引用解构赋值的其他变量，但该变量必须已经声明
		// let [x = 1, y = x] = [];
		// let [x = y, y = 1] = [];	// reErr

		/*
		 * 对象的解构赋值
		 * let {a:a,b:b}的简写：let {a,b}
		 * 真正赋值的为变量，而非属性  ({a:c}=>c)
		 */

		// 变量必须与属性同名
		// let {a,b} = {b:1,a:2};
		// let {a,b} = {a:1};

		// let {a:c} = {a:1,b:2};		// 只能使用c,a会报错

		// let {x = 3} = {};
		// let {x: y = 3} = {};

		/*
		let a = 1;
		[a] = [3];			// a = 3

		let foo = 1;
		{foo} = {foo:2};		// err,会被解析为代码块{foo}
		({foo} = {foo:2});		// 正确
		*/

		// foo为undefined,foo.a会报错
		// let {foo:{a}} = {};  

		/*	// 可以执行
		({} = [1]);
		({} = 'abc');
		*/

		/*let arr = [1,2,3];		
		let {0:a,[arr.length - 1]:b} = arr;*/

		/*
		 * 字符串，数值，布尔值的解构赋值
		 * 当为数值和布尔值时，会先转为对象
		 */

		// let [a, b, c] = 'hello';

		// let {length:len} = 'hello';

		/*let {toString:a} = 123;
		console.log(a === Number.prototype.toString); // true
		*/

		/*
		 * 函数参数的解构赋值
		 */

		// function fn([x,y]) {} //x:x,y:y

		/*function fn ({x=0,y=1} = {}) {
			return {x:x,y:y};
		}
		let {x,y} = fn({x:2,y:3});*/

		// 圆括号：只有赋值语句的非模式部分

		/*
		 * 用途
		 * 1. 交换变量的值
		 * 2. 从函数返回多个值
		 * 3. 函数参数的定义
		 * 4. 提取JSON数据
		 * 5. 函数参数的默认值
		 * 6. 遍历Map结构
		 * 7. 输入模块的指定方法
		 */

		// 1
		/*let x = 1,y = 2;
		[x,y] = [y,x];*/

		// 2
		/*function fn() {
			return [1, 2, 3]
		};*/
		// let a = fn()[1];
		// let [, a, ] = fn();

		// 3
		// function fn({x,y,z}) {}
		// fn({y:1,x:2,z:3})

		// 4 
		/*let json = {
			id: 42,
			status: "OK"
		};*/
		// let {id,status} = json;

		// 6
		/*let map = new Map();
		map.set('first', 'hello');
		map.set('second', 'world');
		for (let [key, value] of map) {		// [key],[,value]
			console.log(`${key}：${value}`);
		}*/

		// 7
		// const {fn1,fn2} = require('aaa');
	</script>

</body>

</html>